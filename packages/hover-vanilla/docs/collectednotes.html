<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="# From dev.to to Collected Notes
         ![Collected Notes, so hot right now](https://i.imgflip.com/44o4l5.jpg)
         I have been publishing notes an articles ..." />
      <!-- HTML Meta Tags -->
      <title>Christian Gill — From dev.to to Collected Notes</title>
      <meta name="description" content="Simply your notes." />
      <meta name="image" content="https://i.imgflip.com/44o4l5.jpg"/>
      <meta name="keywords" content="notes, blog, note taking, simplicity."/>
      <!-- Google / Search Engine Tags -->
      <meta itemprop="name" content="Christian Gill — From dev.to to Collected Notes" />
      <meta itemprop="description" content="The simplest, and most powerful note-taking blogging platform ever made." />
      <meta itemprop="image" content="https://i.imgflip.com/44o4l5.jpg" />
      <!-- Facebook Meta Tags -->
      <meta property="og:url" content="https:///from-dev-to-to-collected-notes" />
      <meta property="og:type" content="website" />
      <meta property="og:title" content="Christian Gill — From dev.to to Collected Notes" />
      <meta property="og:description" content="The simplest, and most powerful note-taking blogging platform ever made.">
      <meta property="og:image" content="https://i.imgflip.com/44o4l5.jpg" />
      <!-- Twitter Meta Tags -->
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content="Christian Gill — From dev.to to Collected Notes" />
      <meta name="twitter:description" content="The simplest, and most powerful note-taking blogging platform ever made." />
      <meta name="twitter:image" content="https://i.imgflip.com/44o4l5.jpg" />
      <link rel="apple-touch-icon" sizes="180x180" href="https://static.collectednotes.com/assets/apple-touch-icon-312a7df912cb436668614c4991fff0aab7481d6146f69cb40d9587a23b5867eb.png" />
      <link rel="icon" type="image/png" sizes="32x32" href="https://static.collectednotes.com/assets/favicon-32x32-830bcc50ba1db7a559cc9c92ffa6cf755a4e5b8c067bcfff1aea79f600950075.png" />
      <link rel="icon" type="image/png" sizes="16x16" href="https://static.collectednotes.com/assets/favicon-16x16-11f4353cc4034de36fd7fb85e09898924184fbc090fb7ae1cc4930f5845e4181.png" />
      <script src="https://static.collectednotes.com/assets/i18n-dac02930a9003081b21ac62ec439ef5c7f68b4d80525366fe5014ccdaf6d3042.js"></script>
      <script src="https://static.collectednotes.com/assets/i18n-dac02930a9003081b21ac62ec439ef5c7f68b4d80525366fe5014ccdaf6d3042.js"></script>
      <script>
         I18n.translations = {"en":{"date":{"formats":{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},"day_names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"abbr_day_names":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"month_names":[null,"January","February","March","April","May","June","July","August","September","October","November","December"],"abbr_month_names":[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"order":["year","month","day"]},"time":{"formats":{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},"am":"am","pm":"pm"},"support":{"array":{"words_connector":", ","two_words_connector":" and ","last_word_connector":", and "},"link":"Support","title":"We're here to help you","summary":"Drop us an email and we'll get back to you as soon as possible."},"number":{"format":{"separator":".","delimiter":",","precision":3,"significant":false,"strip_insignificant_zeros":false},"currency":{"format":{"format":"%u%n","unit":"$","separator":".","delimiter":",","precision":2,"significant":false,"strip_insignificant_zeros":false}},"percentage":{"format":{"delimiter":"","format":"%n%"}},"precision":{"format":{"delimiter":""}},"human":{"format":{"delimiter":"","precision":3,"significant":true,"strip_insignificant_zeros":true},"storage_units":{"format":"%n %u","units":{"byte":{"one":"Byte","other":"Bytes"},"kb":"KB","mb":"MB","gb":"GB","tb":"TB","pb":"PB","eb":"EB"}},"decimal_units":{"format":"%n %u","units":{"unit":"","thousand":"Thousand","million":"Million","billion":"Billion","trillion":"Trillion","quadrillion":"Quadrillion"}}},"nth":{"ordinals":{},"ordinalized":{}}},"errors":{"format":"%{attribute} %{message}","messages":{"model_invalid":"Validation failed: %{errors}","inclusion":"is not included in the list","exclusion":"is reserved","invalid":"is invalid","confirmation":"doesn't match %{attribute}","accepted":"must be accepted","empty":"can't be empty","blank":"can't be blank","present":"must be blank","too_long":{"one":"is too long (maximum is 1 character)","other":"is too long (maximum is %{count} characters)"},"too_short":{"one":"is too short (minimum is 1 character)","other":"is too short (minimum is %{count} characters)"},"wrong_length":{"one":"is the wrong length (should be 1 character)","other":"is the wrong length (should be %{count} characters)"},"not_a_number":"is not a number","not_an_integer":"must be an integer","greater_than":"must be greater than %{count}","greater_than_or_equal_to":"must be greater than or equal to %{count}","equal_to":"must be equal to %{count}","less_than":"must be less than %{count}","less_than_or_equal_to":"must be less than or equal to %{count}","other_than":"must be other than %{count}","odd":"must be odd","even":"must be even","required":"must exist","taken":"has already been taken","url":"is not a valid URL","email":"is not a valid email address","already_confirmed":"was already confirmed, please try signing in","confirmation_period_expired":"needs to be confirmed within %{period}, please request a new one","expired":"has expired, please request a new one","not_found":"not found","not_locked":"was not locked","not_saved":{"one":"1 error prohibited this %{resource} from being saved:","other":"%{count} errors prohibited this %{resource} from being saved:"}}},"activerecord":{"errors":{"messages":{"record_invalid":"Validation failed: %{errors}","restrict_dependent_destroy":{"has_one":"Cannot delete record because a dependent %{record} exists","has_many":"Cannot delete record because dependent %{record} exist"}}}},"datetime":{"distance_in_words":{"half_a_minute":"half a minute","less_than_x_seconds":{"one":"less than 1 second","other":"less than %{count} seconds"},"x_seconds":{"one":"1 second","other":"%{count} seconds"},"less_than_x_minutes":{"one":"less than a minute","other":"less than %{count} minutes"},"x_minutes":{"one":"1 minute","other":"%{count} minutes"},"about_x_hours":{"one":"about 1 hour","other":"about %{count} hours"},"x_days":{"one":"1 day","other":"%{count} days"},"about_x_months":{"one":"about 1 month","other":"about %{count} months"},"x_months":{"one":"1 month","other":"%{count} months"},"about_x_years":{"one":"about 1 year","other":"about %{count} years"},"over_x_years":{"one":"over 1 year","other":"over %{count} years"},"almost_x_years":{"one":"almost 1 year","other":"almost %{count} years"}},"prompts":{"year":"Year","month":"Month","day":"Day","hour":"Hour","minute":"Minute","second":"Seconds"}},"helpers":{"select":{"prompt":"Please select"},"submit":{"create":"Create %{model}","update":"Update %{model}","submit":"Save %{model}"}},"flash":{"actions":{"create":{"notice":"%{resource_name} was successfully created."},"update":{"notice":"%{resource_name} was successfully updated."},"destroy":{"notice":"%{resource_name} was successfully destroyed.","alert":"%{resource_name} could not be destroyed."}}},"devise":{"confirmations":{"confirmed":"Your email address has been successfully confirmed.","send_instructions":"You will receive an email with instructions for how to confirm your email address in a few minutes.","send_paranoid_instructions":"If your email address exists in our database, you will receive an email with instructions for how to confirm your email address in a few minutes."},"failure":{"already_authenticated":"You are already signed in.","inactive":"Your account is not activated yet.","invalid":"Invalid %{authentication_keys} or password.","locked":"Your account is locked.","last_attempt":"You have one more attempt before your account is locked.","not_found_in_database":"Invalid %{authentication_keys} or password.","timeout":"Your session expired. Please sign in again to continue.","unauthenticated":"You need to sign in or sign up before continuing.","unconfirmed":"You have to confirm your email address before continuing."},"mailer":{"confirmation_instructions":{"subject":"Confirmation instructions"},"reset_password_instructions":{"subject":"Reset password instructions"},"unlock_instructions":{"subject":"Unlock instructions"},"email_changed":{"subject":"Email Changed"},"password_change":{"subject":"Password Changed"}},"omniauth_callbacks":{"failure":"Could not authenticate you from %{kind} because \"%{reason}\".","success":"Successfully authenticated from %{kind} account."},"passwords":{"no_token":"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.","send_instructions":"You will receive an email with instructions on how to reset your password in a few minutes.","send_paranoid_instructions":"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.","updated":"Your password has been changed successfully. You are now signed in.","updated_not_active":"Your password has been changed successfully."},"registrations":{"destroyed":"Bye! Your account has been successfully cancelled. We hope to see you again soon.","signed_up":"Welcome!","signed_up_but_inactive":"You have signed up successfully. However, we could not sign you in because your account is not yet activated.","signed_up_but_locked":"You have signed up successfully. However, we could not sign you in because your account is locked.","signed_up_but_unconfirmed":"A message with a confirmation link has been sent to your email address. Please follow the link to activate your account.","update_needs_confirmation":"You updated your account successfully, but we need to verify your new email address. Please check your email and follow the confirmation link to confirm your new email address.","updated":"Your account has been updated successfully.","updated_but_not_signed_in":"Your account has been updated successfully, but since your password was changed, you need to sign in again"},"sessions":{"signed_in":"Signed in successfully.","signed_out":"Signed out successfully.","already_signed_out":"Signed out successfully."},"unlocks":{"send_instructions":"You will receive an email with instructions for how to unlock your account in a few minutes.","send_paranoid_instructions":"If your account exists, you will receive an email with instructions for how to unlock it in a few minutes.","unlocked":"Your account has been unlocked successfully. Please sign in to continue."}},"app":"Collected Notes","app_legal":"Collected Notes Inc.","app_legal_url":"https://collectednotes.com","app_support_email":"support@collectednotes.com","signIn":"Sign In","signUp":"Register","signUpAction":"Sign Up","signOut":"Sign Out","auth":{"google":{"continue":"Continue with Google","error":"There was a problem signing you in through Google. Please register or try signing in later."}},"cancel":"Cancel","save":"Save","ago":"ago","privacy":"Privacy","faq":"FAQ","privacy_policy":"Privacy Policy","banned":"Your account is suspended","add":"Add","publish":"Publish","none":"None","loading":"Loading","delete":"Delete","sure?":"Are you sure?","expires":"Expires","question":"Question","content":"Content","continue":"Continue","answered":"answered","total":"Total","toggle":{"true":"YES","false":"NO"},"navbar":{"dropdown":{"profile":"Profile","privacy":"Privacy","company":"Add Your Team","about":"About Us"}},"gdpr":{"enter":"By clicking '%{action}' above, you acknowledge that you have read and understood, and agree to the \u003ca href='%{terms}'\u003eTerms \u0026 Conditions\u003c/a\u003e and \u003ca href='%{privacy}'\u003ePrivacy Policy\u003c/a\u003e and our cookie policy \u003ca href='%{cookies}'\u003eCookie Policy\u003c/a\u003e."},"account":{"update_succeded":"Successfully updated","update_failed":"Failed to update details","title":"Edit Account","update":"Update","change_password":"Change your password","forgot_password_title":"Forgot your password?","forgot_password_subtitle":"Send me reset password instructions","resend_title":"Resend confirmation instructions","resend_subtitle":"You will receive an email with instructions for how to confirm your email address in a few minutes.","manage_subscription":"Manage your subscription","deactivate":{"title":"This will deactivate your account","summary":"You’re about to start the process of deactivating your account. This will delete all your campaigns, answers and every other data stored on our system. \u003cstrong\u003e\u003cu\u003eThis is irreversible\u003c/u\u003e\u003c/strong\u003e.","action":"Delete My Account","flash":"Your account and it's associated data is now deleted"},"backup":{"action":"Send me a .zip file with of all my notes.","title":"Export all your notes","summary":"We'll send you an email containing a .zip file with all your notes. You can then use that to upload your notes as a static website elsewhere.","done":"You'll receive an email soon."},"subscription":{"manage":"⚡️ Manage your Collected Notes subscription","title":"Your Collected Notes subscription","upgrade":"You need a premium account","footer":"Build a page like this →","upsell_action":"You need a ⚡️ \u003cu\u003e\u003cstrong\u003e\u003ca href=\"/accounts/me/subscription\"\u003ePremium subscription\u003c/a\u003e\u003c/strong\u003e\u003c/u\u003e for this feature","upsell_navbar":"\u003cspan  class='button is-primary is-inverted'\u003eWant your own domain \u0026 API? ⚡️ \u003cstrong\u003eGo Premium\u003c/strong\u003e\u003c/span\u003e","choose":"Choose your plan","active":"Your subscription is active.","explanation":"7 days free. Cancel anytime. No surprises.","cancel":"Cancel Subscription","cancelled":"Your subscription is now cancelled","monthly":{"action":"⚡️ $5 per \u003cstrong\u003emonth\u003c/strong\u003e"},"yearly":{"action":"⚡️ $50 per \u003cstrong\u003eyear\u003c/strong\u003e"},"confirm_cancel":{"title":"We're sad to see you go","summary":"Once you cancel your subscription we'll stop automatic payments. Note that you'll still have access to your premium account until the end date of the subscription period.","action":"Yes, cancel my subscription"},"expires_at":"Period ends in %{at}."},"token":{"title":"Your developer API access","summary":"You can use your token to perform API requests. To learn more go to \u003cu\u003e\u003ca href='https://collectednotes.com/blog/api'\u003ehttps://collectednotes.com/blog/api\u003c/a\u003e\u003c/u ."}},"announcements":{"title":"What's New","read-more":"Read More","all":"All announcements →","time-ago":" ago"},"sites":{"edit":"Edit Site","error_create":"Error saving site","error_update":"Error updating site","site_path_explanation":"People will access your site at: https://%{domain}/%{site_path}.","advanced":{"title":"Advanced"},"headline":{"label":"Headline","placeholder":"It shows below the title on your site."},"domain":{"label":"Custom Domain","placeholder":"https://yourdomain.com","learn_more":"How to setup your custom domain →"}},"website":{"title":"Collected Notes.","tagline":"The simplest, and most powerful \u003cstrong\u003enote-taking\u003c/strong\u003e \u003cstrong\u003eblogging\u003c/strong\u003e platform ever made.","subtitle":"In Borges' story, the \u003cstrong\u003e\u003ci\u003eCollected Notes\u003c/i\u003e\u003c/strong\u003e is a point in space that contains all other points. Anyone who gazes into it can see everything in the universe from every angle simultaneously, without distortion, overlapping, or confusion.","action":"Start writing","blog":"Blog","meta":{"tagline":"The simplest, and most powerful note-taking blogging platform ever made."},"join":{"placeholder":"Your email address","placeholder_name":"Your name","password":"Password","password_confirmation":"Password Confirmation","password_current":"Current Password"},"footer":"Created with 🖤"},"curated":{"title":"Latest notes"},"notes":{"edit":"Edit Note","add":"Add Note","error_create":"Error saving note","error_update":"Error updating note","error_delete":"Error deleting note","confirm_delete":{"title":"Are you sure you want to delete it?","summary":"You cannot undo this action."},"visibility":{"private":"Private","public":"Public","public_site":"Showing on site"},"uploads":{"images":{"title":"Upload an image","browse":"browse","paste":"Drop an Image here or "},"upsell":"\u003cspan  class='button is-primary is-inverted'\u003eWant to upload files? ⚡️ \u003cstrong\u003eGo Premium\u003c/strong\u003e\u003c/span\u003e"}},"photos":{"quota":"You are over the limit of photo uploads."},"api":{"formats":{"unknown":"Unknown format requested"}}},"de":{"errors":{"messages":{"url":"ist keine gültige URL"}}},"fr":{"errors":{"messages":{"url":"n'est pas une URL valide"}}},"it":{"errors":{"messages":{"url":"non è un URL valido."}}},"ja":{"errors":{"messages":{"url":"は不正なURLです"}}},"km":{"errors":{"messages":{"url":"មិនត្រឹមត្រូវ"}}},"pl":{"errors":{"messages":{"url":"nie jest poprawnym adresem URL."}}},"pt-BR":{"errors":{"messages":{"url":"não é uma URL válida"}}},"ro":{"errors":{"messages":{"url":"nu este un URL valid"}}},"ru":{"errors":{"messages":{"url":"некорректный URL"}}},"tr":{"errors":{"messages":{"url":"Geçerli bir URL değil"}}},"zh-CN":{"errors":{"messages":{"url":"网址格式不正确"}}},"zh-TW":{"errors":{"messages":{"url":"網址格式不正確"}}}};
         I18n.locale = "en";
      </script>
      <meta name="csrf-param" content="authenticity_token" />
      <meta name="csrf-token" content="+YTJgZWVlW7Nw3QZHonJq5TlJQ4E5gVV0nUiXWHUUclw1bUbjd2XHnGzazUvc2subrWJ3Ah8IA/TzEH9B+MdBg==" />
      <link rel="stylesheet" media="all" href="https://static.collectednotes.com/assets/application-941ea89c41bcb7c3e54b7711cee651416f315fa2fff06d817b03badd716862d0.css" data-turbolinks-track="reload" />
      <link rel="stylesheet" media="all" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" async/>
      <script src="https://static.collectednotes.com/packs/js/application-807eb211a8f1dc24fd95.js"></script>
   </head>
   <body>
      <section class="hero container">
         <div class="hero-head">
            <nav class="navbar global-nav" role="navigation" aria-label="main navigation">
               <div class="navbar-brand">
                  <a class="logo" href="https://collectednotes.com/">
                     <svg viewBox="0 0 346 282" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" alt="Collected Notes%">
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                           <circle id="Oval" fill-opacity="0.95" fill="#23252E" cx="129.5" cy="155.5" r="93.5" width="150" height="150"></circle>
                           <rect id="Rectangle" fill-opacity="0.95" fill="#B1B1B1" x="146" y="42" width="150" height="150" rx="25"></rect>
                        </g>
                     </svg>
                  </a>
                  <span class="navbar-item is-mobile mobile-sign-in is-hidden-desktop">
                  <a class="button is-primary floating is-rounded" href="/sites/1696/notes/new">
                  <span data-name="add-note" class="has-text-weight-bold">Add Note</span>
                  <span class="icon is-large">
                  <i class="fas fa-plus"></i>
                  </span>
                  </a>        </span>
                  <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  </a>
               </div>
               <div id="navbarBasicExample" class="navbar-menu">
                  <div class="navbar-start">
                  </div>
                  <div class="navbar-end">
                     <div class="navbar-item">
                        <a class="navbar-item " href="/accounts/me/subscription">
                        <span><span  class='button is-primary is-inverted'>Want your own domain & API? ⚡️ <strong>Go Premium</strong></span></span>
                        </a>
                        <a class="button is-primary floating is-rounded navbar-app-item is-hidden-touch" href="/sites/1696/notes/new">
                        <span class="has-text-weight-bold">Add Note</span>
                        <span class="icon is-large">
                        <i class="fas fa-plus"></i>
                        </span>
                        </a>
                        <div class="navbar-item has-dropdown is-hoverable navbar-app-item navbar-menu-dropdown">
                           <span class="button is-borderless is-hidden-touch">
                           <span class="icon is-large">
                           <i class="fas fa-2x fa-caret-down"></i>
                           </span>
                           </span>
                           <div class="navbar-dropdown is-boxed is-right">
                              <a class="navbar-item" href="https://collectednotes.com/accounts/1899/edit">
                              <span>Profile</span>
                              </a>
                              <a class="navbar-item" href="https://collectednotes.com/support">
                              <span>Support</span>
                              </a>
                              <a class="navbar-item" href="https://collectednotes.com/privacy">
                              <span>Privacy</span>
                              </a>
                              <hr class="navbar-divider">
                              <a class="navbar-item" rel="nofollow" data-method="delete" href="https://collectednotes.com/users/sign_out">
                              <span>Sign Out</span>
                              </a>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </nav>
         </div>
      </section>
      <section class="hero-body container">
         <div class="note">
            <div class="column is-8 is-offset-2">
               <h2 class="subtitle is-size-5 is-marginless">
                  <a href="/gillchristian">Christian Gill</a>
               </h2>
               <div class="content">
                  <h1 id="from-dev-to-to-collected-notes">From dev.to to Collected Notes</h1>
                  <p><img src="https://i.imgflip.com/44o4l5.jpg" alt="Collected Notes, so hot right now"></p>
                  <p>I have been publishing notes an articles on <a data-size="large" target="_blank" href="https://dev.to">dev.to</a> for around a year and a half already. Although it&#39;s a great platform and there&#39;s a pretty nice community around it, I always wanted to have my own thing. Something simpler, just upload my content and that&#39;s it. No likes, no feeds, no related posts from other users. So I got very excited when <a href="https://twitter.com/esacrosa/">@esacrosa</a> announced Collected Notes and I was able to try out the alpha version 🎉</p>
                  <p>From now on I&#39;ll writing here on Collected Notes. And cross-post to <a href="https://dev.to">dev.to</a> most probably.</p>
                  <p>If I&#39;ll be writing here then I should have the rest of articles and notes from <a href="https://dev.to/gillchristian">dev.to/gillchristian</a> here as well.</p>
                  <p>Inspired by <a href="https://twitter.com/RiccardoOdone">@RiccardoOdone</a> videos on <a href="https://youtu.be/XsgixFYo_Sc">scripting</a> <a href="https://youtu.be/PU9Gs-XRYEQ">with Haskell</a> and becase  both <a href="https://dev.to">dev.to</a> and Collected Notes have APIs I did what anybody would do, write some code to automate the process.</p>
                  <p><img src="https://imgs.xkcd.com/comics/the_general_problem.png" alt="xkcd #974"></p>
                  <p><em>* Disclaimer, in my case it won&#39;t save time in the long run since it is a one time script.</em></p>
                  <h2 id="the-script">The script</h2>
                  <p>I won&#39;t go into detail of how the script is implemented but I do think it is worth pointing out the libraries and tools involved:</p>
                  <ul>
                     <li><a href="https://docs.haskellstack.org/en/stable/GUIDE/#script-interpreter">Stack script interpreter</a> allows to use Haskell for scripting, even to use libraries and a particular compiler version if needed</li>
                     <li><a href="https://hackage.haskell.org/package/optparse-applicative">optparse-applicative</a> a command line options parsing with an applicative flavor 🌯</li>
                     <li><a href="https://hackage.haskell.org/package/wreq">wreq</a> for HTTP requests</li>
                     <li><a href="http://hackage.haskell.org/package/lens">lens</a>, <a href="http://hackage.haskell.org/package/aeson">aeson</a> &amp; <a href="http://hackage.haskell.org/package/lens-aeson">lens-aeson</a> for manipulating JSON data. It&#39;s the first time I use lenses so no idea what I was doing 🐶</li>
                     <li><a href="https://hackage.haskell.org/package/parsec">parsec</a>, a parser combinator library, which I used to parse the markdown and remove the Front Matter (metadata) section</li>
                  </ul>
                  <p>👇 <em>The help text produced by optparse-applicative</em></p>
                  <div class="highlight">
                     <pre class="highlight plaintext"><code>$ ./dev-to-collected.hs --help
Script to migrate all your dev.to articles to CollectedNotes

Usage: dev-to-collected.hs --email EMAIL --token TOKEN --api-key API_KEY

Available options:
  --email EMAIL            Your CollectedNotes email
  --token TOKEN            CollectedNotes API Token
  --api-key API_KEY        dev.to API Key
  -h,--help                Show this help text
</code></pre>
                  </div>
                  <p><code>dev-to-collected.hs</code> (<a href="https://github.com/gillchristian/scripts.hs/blob/5c661e13e177b3cb02bc47454ddea67222bba74c/dev-to-collected.hs">see on GitHub</a>)</p>
                  <div class="highlight">
                     <pre class="highlight haskell"><code><span class="o">#!/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">stack</span>
<span class="cm">{- stack
   script
   --resolver lts-13.27
   --package aeson
   --package sort
   --package lens-aeson
   --package wreq
   --package lens
   --package text
   --package bytestring
   --package parsec
   --package optparse-applicative
-}</span>

<span class="cp">{-# LANGUAGE OverloadedStrings #-}</span>
<span class="cp">{-# LANGUAGE RecordWildCards #-}</span>

<span class="kr">import</span> <span class="nn">Control.Lens</span> <span class="k">hiding</span> <span class="p">((</span><span class="o">.=</span><span class="p">))</span>
<span class="kr">import</span> <span class="nn">Data.Aeson</span>
<span class="kr">import</span> <span class="nn">Data.Aeson.Lens</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.ByteString.Internal</span> <span class="k">as</span> <span class="n">BS</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.ByteString.Lazy.Internal</span> <span class="k">as</span> <span class="n">LazyBS</span>
<span class="kr">import</span> <span class="nn">Data.Maybe</span>
<span class="kr">import</span> <span class="nn">Data.Ord</span>
<span class="kr">import</span> <span class="nn">Data.Sort</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.Text</span> <span class="k">as</span> <span class="n">Text</span>
<span class="kr">import</span> <span class="nn">Data.Text</span> <span class="p">(</span><span class="kt">Text</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Network.Wreq</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Options.Applicative</span> <span class="k">as</span> <span class="n">Opt</span>
<span class="kr">import</span> <span class="nn">Options.Applicative</span> <span class="p">((</span><span class="o">&lt;**&gt;</span><span class="p">))</span>
<span class="kr">import</span> <span class="nn">Text.Parsec</span>
<span class="kr">import</span> <span class="nn">Text.Parsec.Char</span>
<span class="kr">import</span> <span class="nn">Text.Parsec.Text</span>

<span class="kr">type</span> <span class="kt">DevtoArticle</span> <span class="o">=</span>
  <span class="p">(</span> <span class="kt">Text</span><span class="p">,</span> <span class="c1">-- title</span>
    <span class="kt">Text</span><span class="p">,</span> <span class="c1">-- published</span>
    <span class="kt">Text</span><span class="p">,</span> <span class="c1">-- cover_image</span>
    <span class="kt">Text</span><span class="p">,</span> <span class="c1">-- url</span>
    <span class="kt">Text</span> <span class="c1">-- body</span>
  <span class="p">)</span>

<span class="n">eitherToMaybe</span> <span class="o">::</span> <span class="kt">Either</span> <span class="n">e</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="kt">Maybe</span> <span class="n">a</span>
<span class="n">eitherToMaybe</span> <span class="p">(</span><span class="kt">Right</span> <span class="n">a</span><span class="p">)</span> <span class="o">=</span> <span class="kt">Just</span> <span class="n">a</span>
<span class="n">eitherToMaybe</span> <span class="kr">_</span> <span class="o">=</span> <span class="kt">Nothing</span>

<span class="n">stripMeta</span> <span class="o">::</span> <span class="kt">Parser</span> <span class="kt">Text</span>
<span class="n">stripMeta</span> <span class="o">=</span> <span class="kr">do</span>
  <span class="kr">_</span> <span class="o">&lt;-</span> <span class="n">spaces</span>
  <span class="kr">_</span> <span class="o">&lt;-</span> <span class="n">string</span> <span class="s">"--"</span>
  <span class="kr">_</span> <span class="o">&lt;-</span> <span class="n">spaces</span>
  <span class="kr">_</span> <span class="o">&lt;-</span> <span class="n">manyTill</span> <span class="n">anyChar</span> <span class="o">$</span> <span class="n">try</span> <span class="o">$</span> <span class="n">string</span> <span class="s">"---"</span>
  <span class="kr">_</span> <span class="o">&lt;-</span> <span class="n">spaces</span>
  <span class="kt">Text</span><span class="o">.</span><span class="n">pack</span> <span class="o">&lt;$&gt;</span> <span class="n">many</span> <span class="n">anyChar</span>

<span class="n">devtoToCollected</span> <span class="o">::</span> <span class="kt">DevtoArticle</span> <span class="o">-&gt;</span> <span class="kt">Either</span> <span class="kt">ParseError</span> <span class="p">(</span><span class="kt">Text</span><span class="p">,</span> <span class="kt">Text</span><span class="p">)</span>
<span class="n">devtoToCollected</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="kr">_</span><span class="p">,</span> <span class="n">cover_image</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">body_markdown</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">makeArticle</span> <span class="o">&lt;$&gt;</span> <span class="n">parse</span> <span class="n">stripMeta</span> <span class="s">""</span> <span class="n">body_markdown</span>
  <span class="kr">where</span>
    <span class="n">makeArticle</span> <span class="n">body</span> <span class="o">=</span>
      <span class="p">(</span> <span class="n">title</span><span class="p">,</span>
        <span class="kt">Text</span><span class="o">.</span><span class="n">unlines</span>
          <span class="p">[</span> <span class="s">"# "</span> <span class="o">&lt;&gt;</span> <span class="n">title</span> <span class="o">&lt;&gt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span>
            <span class="s">"*Originally posted on [dev.to/gillchristian]("</span> <span class="o">&lt;&gt;</span> <span class="n">url</span> <span class="o">&lt;&gt;</span> <span class="s">")*.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span>
            <span class="s">"!["</span> <span class="o">&lt;&gt;</span> <span class="n">title</span> <span class="o">&lt;&gt;</span> <span class="s">"]("</span> <span class="o">&lt;&gt;</span> <span class="n">cover_image</span> <span class="o">&lt;&gt;</span> <span class="s">")</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span>
            <span class="n">body</span>
          <span class="p">]</span>
      <span class="p">)</span>

<span class="n">extract</span> <span class="o">::</span> <span class="kt">Response</span> <span class="kt">LazyBS</span><span class="o">.</span><span class="kt">ByteString</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">DevtoArticle</span><span class="p">]</span>
<span class="n">extract</span> <span class="n">r</span> <span class="o">=</span>
  <span class="kr">let</span> <span class="kt">Fold</span> <span class="n">article</span> <span class="o">=</span>
        <span class="p">(,,,,)</span> <span class="o">&lt;$&gt;</span> <span class="kt">Fold</span> <span class="p">(</span><span class="n">key</span> <span class="s">"title"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
          <span class="o">&lt;*&gt;</span> <span class="kt">Fold</span> <span class="p">(</span><span class="n">key</span> <span class="s">"published_at"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
          <span class="o">&lt;*&gt;</span> <span class="kt">Fold</span> <span class="p">(</span><span class="n">key</span> <span class="s">"cover_image"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
          <span class="o">&lt;*&gt;</span> <span class="kt">Fold</span> <span class="p">(</span><span class="n">key</span> <span class="s">"url"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
          <span class="o">&lt;*&gt;</span> <span class="kt">Fold</span> <span class="p">(</span><span class="n">key</span> <span class="s">"body_markdown"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
   <span class="kr">in</span> <span class="n">r</span> <span class="o">^..</span> <span class="n">responseBody</span> <span class="o">.</span> <span class="n">values</span> <span class="o">.</span> <span class="n">article</span>

<span class="n">snd5</span> <span class="o">::</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">b</span>
<span class="n">snd5</span> <span class="p">(</span><span class="kr">_</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="kr">_</span><span class="p">,</span> <span class="kr">_</span><span class="p">,</span> <span class="kr">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">b</span>

<span class="n">processPosts</span> <span class="o">::</span> <span class="kt">Response</span> <span class="kt">LazyBS</span><span class="o">.</span><span class="kt">ByteString</span> <span class="o">-&gt;</span> <span class="p">[(</span><span class="kt">Text</span><span class="p">,</span> <span class="kt">Text</span><span class="p">)]</span>
<span class="n">processPosts</span> <span class="o">=</span> <span class="n">mapMaybe</span> <span class="n">eitherToMaybe</span> <span class="o">.</span> <span class="n">fmap</span> <span class="n">devtoToCollected</span> <span class="o">.</span> <span class="n">sortOn</span> <span class="n">snd5</span> <span class="o">.</span> <span class="n">extract</span>

<span class="n">getDevtoArticles</span> <span class="o">::</span> <span class="kt">Config</span> <span class="o">-&gt;</span> <span class="kt">IO</span> <span class="p">(</span><span class="kt">Response</span> <span class="kt">LazyBS</span><span class="o">.</span><span class="kt">ByteString</span><span class="p">)</span>
<span class="n">getDevtoArticles</span> <span class="kt">Config</span> <span class="p">{</span><span class="o">..</span><span class="p">}</span> <span class="o">=</span>
  <span class="n">getWith</span> <span class="n">reqConfg</span> <span class="n">url</span>
  <span class="kr">where</span>
    <span class="c1">-- curl -H "api-key: API_KEY" https://dev.to/api/articles/me/published</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">"https://dev.to/api/articles/me/published"</span>
    <span class="n">reqConfg</span> <span class="o">=</span> <span class="n">defaults</span> <span class="o">&amp;</span> <span class="n">header</span> <span class="s">"api-key"</span> <span class="o">.~</span> <span class="p">[</span><span class="n">devtoApiKey</span><span class="p">]</span>

<span class="n">postCollectedArticle</span> <span class="o">::</span> <span class="kt">Config</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Text</span><span class="p">,</span> <span class="kt">Text</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="n">postCollectedArticle</span> <span class="kt">Config</span> <span class="p">{</span><span class="o">..</span><span class="p">}</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">postBody</span><span class="p">)</span> <span class="o">=</span> <span class="kr">do</span>
  <span class="n">putStrLn</span> <span class="o">$</span> <span class="kt">Text</span><span class="o">.</span><span class="n">unpack</span> <span class="o">$</span> <span class="s">"Posting: "</span> <span class="o">&lt;&gt;</span> <span class="n">title</span>
  <span class="n">r</span> <span class="o">&lt;-</span> <span class="n">postWith</span> <span class="n">reqConfg</span> <span class="n">url</span> <span class="n">body</span>
  <span class="n">putStrLn</span> <span class="o">$</span> <span class="kt">Text</span><span class="o">.</span><span class="n">unpack</span> <span class="o">$</span> <span class="n">successMsg</span> <span class="n">r</span>
  <span class="kr">where</span>
    <span class="c1">-- curl -H "Authorization: your@email.com your-secret-token" \</span>
    <span class="c1">-- -H "Accept: application/json" \</span>
    <span class="c1">-- -H "Content-Type: application/json" \</span>
    <span class="c1">-- https://collectednotes.com/sites/1/notes \</span>
    <span class="c1">-- -d '{"note": {"body": "# My new note title\nThis is the body", "visibility": "private"}}'</span>
    <span class="n">reqConfg</span> <span class="o">=</span>
      <span class="n">defaults</span>
        <span class="o">&amp;</span> <span class="n">header</span> <span class="s">"Authorization"</span> <span class="o">.~</span> <span class="p">[</span><span class="n">email</span> <span class="o">&lt;&gt;</span> <span class="s">" "</span> <span class="o">&lt;&gt;</span> <span class="n">collectednotesToken</span><span class="p">]</span>
        <span class="o">&amp;</span> <span class="n">header</span> <span class="s">"Content-Type"</span> <span class="o">.~</span> <span class="p">[</span><span class="s">"application/json"</span><span class="p">]</span>
        <span class="o">&amp;</span> <span class="n">header</span> <span class="s">"Accept"</span> <span class="o">.~</span> <span class="p">[</span><span class="s">"application/json"</span><span class="p">]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">"https://collectednotes.com/sites/57/notes"</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">object</span> <span class="p">[</span><span class="s">"note"</span> <span class="o">.=</span> <span class="n">object</span> <span class="p">[</span><span class="s">"body"</span> <span class="o">.=</span> <span class="n">postBody</span><span class="p">,</span> <span class="s">"visibility"</span> <span class="o">.=</span> <span class="p">(</span><span class="s">"private"</span> <span class="o">::</span> <span class="kt">Text</span><span class="p">)]]</span>
    <span class="n">successMsg</span> <span class="n">r</span> <span class="o">=</span>
      <span class="s">"✓ Note created: ("</span>
        <span class="o">&lt;&gt;</span> <span class="n">fromMaybe</span> <span class="s">"&lt;no response body&gt;"</span> <span class="p">(</span><span class="n">r</span> <span class="o">^?</span> <span class="n">responseBody</span> <span class="o">.</span> <span class="n">key</span> <span class="s">"url"</span> <span class="o">.</span> <span class="n">_String</span><span class="p">)</span>
        <span class="o">&lt;&gt;</span> <span class="s">")</span><span class="se">\n</span><span class="s">"</span>

<span class="kr">data</span> <span class="kt">Config</span> <span class="o">=</span> <span class="kt">Config</span>
  <span class="p">{</span> <span class="n">email</span> <span class="o">::</span> <span class="kt">BS</span><span class="o">.</span><span class="kt">ByteString</span><span class="p">,</span>
    <span class="n">collectednotesToken</span> <span class="o">::</span> <span class="kt">BS</span><span class="o">.</span><span class="kt">ByteString</span><span class="p">,</span>
    <span class="n">devtoApiKey</span> <span class="o">::</span> <span class="kt">BS</span><span class="o">.</span><span class="kt">ByteString</span>
  <span class="p">}</span>
  <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">)</span>

<span class="n">configP</span> <span class="o">::</span> <span class="kt">Opt</span><span class="o">.</span><span class="kt">Parser</span> <span class="kt">Config</span>
<span class="n">configP</span> <span class="o">=</span>
  <span class="kt">Config</span>
    <span class="o">&lt;$&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">strOption</span>
      <span class="p">(</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">long</span> <span class="s">"email"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">metavar</span> <span class="s">"EMAIL"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">help</span> <span class="s">"Your CollectedNotes email"</span>
      <span class="p">)</span>
    <span class="o">&lt;*&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">strOption</span>
      <span class="p">(</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">long</span> <span class="s">"token"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">metavar</span> <span class="s">"TOKEN"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">help</span> <span class="s">"CollectedNotes API Token"</span>
      <span class="p">)</span>
    <span class="o">&lt;*&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">strOption</span>
      <span class="p">(</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">long</span> <span class="s">"api-key"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">metavar</span> <span class="s">"API_KEY"</span>
          <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">help</span> <span class="s">"dev.to API Key"</span>
      <span class="p">)</span>

<span class="n">opts</span> <span class="o">::</span> <span class="kt">Opt</span><span class="o">.</span><span class="kt">ParserInfo</span> <span class="kt">Config</span>
<span class="n">opts</span> <span class="o">=</span>
  <span class="kt">Opt</span><span class="o">.</span><span class="n">info</span>
    <span class="p">(</span><span class="n">configP</span> <span class="o">&lt;**&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">helper</span><span class="p">)</span>
    <span class="p">(</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">fullDesc</span>
        <span class="o">&lt;&gt;</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">header</span> <span class="s">"Script to migrate all your dev.to articles to CollectedNotes"</span>
    <span class="p">)</span>

<span class="n">main</span> <span class="o">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="n">main</span> <span class="o">=</span> <span class="kr">do</span>
  <span class="n">config</span> <span class="o">&lt;-</span> <span class="kt">Opt</span><span class="o">.</span><span class="n">execParser</span> <span class="n">opts</span>
  <span class="n">r</span> <span class="o">&lt;-</span> <span class="n">getDevtoArticles</span> <span class="n">config</span>
  <span class="n">mapM_</span> <span class="p">(</span><span class="n">postCollectedArticle</span> <span class="n">config</span><span class="p">)</span> <span class="o">$</span> <span class="n">processPosts</span> <span class="n">r</span>
  <span class="n">putStrLn</span> <span class="s">"Great success!!! 🎉"</span>
</code></pre>
                  </div>
                  <p>Is it an overkill? No doubt.</p>
                  <p>Did I learn new and cool stuff in the process? No doubt 🤓</p>
                  <hr>
                  <p><strong>Happy and safe coding</strong> 🖖</p>
               </div>
               <div class="footnote is-size-6" title="2020-06-10 11:50:01 UTC">4 days ago</div>
               <a class="author-footer" href="/gillchristian">
                  <div class="author">
                     <h3 class="title is-size-4">Christian Gill</h3>
                  </div>
            </div>
            </a>
         </div>
         </div>
      </section>
   </body>
   <style>
    :root {
      --microlink-background-color: #1A1A1A;
      --microlink-color: white;
      --microlink-border-color: #666;
      --microlink-hover-border-color: #999;
    }
   </style>
   <script src="https://cdn.jsdelivr.net/combine/npm/react@16/umd/react.production.min.js,npm/react-dom@16/umd/react-dom.production.min.js,npm/@emotion/styled@11.11.0/dist/emotion-styled.cjs.min.js,npm/@emotion/react@11.11.0/dist/emotion-react.cjs.min.js,npm/@microlink/mql@latest/dist/mql.min.js"></script>
   <script src="./dist/microlink.js"></script>
   <script>
      document.addEventListener('DOMContentLoaded', function (event) {
        microlinkHover('.content a')
      })
   </script>
</html>
